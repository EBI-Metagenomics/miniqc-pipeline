nextflow_pipeline {

    name "Test Workflow main.nf"
    script "main.nf"

    test("Should run without failures") {

        when {
            params {
                samplesheet = "$projectDir/tests/test_samplesheet.csv" // These are downloaded from github (the main branch)
                ref_genome  = "$projectDir/tests/test_data/ERZ857996.fasta"
                outdir = "tests/results"
            }
        }

        then {
            with(workflow) {
                assert success
                assert trace.tasks().size() == 6
            }
        }

    }

}
